services:
  stage-teipsum-nginx:
    container_name: stage-teipsum-nginx
    image: nginx:latest
    ports: 
      - "22080:80"
      - "22443:443"
    volumes:
      - ./nginx.stage.conf:/etc/nginx/nginx.conf:ro
      - /etc/letsencrypt/live/stage.teipsum.store/fullchain.pem:/etc/nginx/ssl/fullchain.pem:ro
      - /etc/letsencrypt/live/stage.teipsum.store/privkey.pem:/etc/nginx/ssl/privkey.pem:ro
      - /home/adeployer/secrets/.htpasswd:/etc/nginx/secrets/.htpasswd:ro
    networks:
      - stage-net

networks:
  stage-net:
    external: true